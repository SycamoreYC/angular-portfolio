# ç¬¬å…«ç«  åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤

- å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæŒ‡ä»¤ã€‚
- æœ€å¸¸è§çš„è‡ªå®šä¹‰æŒ‡ä»¤æ ·ä¾‹ï¼Œä»¥åŠå¦‚ä½•ç¼–å†™å¯¹åº”ä»£ç ã€‚
- äº’ç›¸ä¾èµ–çš„æŒ‡ä»¤ã€‚
- å¦‚ä½•å¯¹æŒ‡ä»¤è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚

## 8.1 ä»€ä¹ˆæ˜¯Angular JSæŒ‡ä»¤

> æŒ‡ä»¤çš„èŒè´£æ˜¯ä¿®æ”¹DOMç»“æ„ï¼Œå¹¶å°†ä½œç”¨åŸŸå’ŒDOMè¿æ¥èµ·æ¥ã€‚è¿™è¯´æ˜æŒ‡ä»¤æ—¢è¦æ“ä½œDOMï¼Œå°†ä½œç”¨åŸŸå†…çš„æ•°æ®ç»‘å®šåˆ°DOMèŠ‚ç‚¹ä¸Šï¼Œåˆè¦ä¸ºDOMç»‘å®šè°ƒç”¨ä½œç”¨åŸŸå†…çš„å¯¹åº”æ–¹æ³•ã€‚

### ç†è§£å†…ç½®æŒ‡ä»¤

> è¯»AngularJSä¸­æœ‰å…³æŒ‡ä»¤çš„æºä»£ç ï¼Œæ˜¯å­¦ä¹ å¦‚ä½•å¼€å‘è‡ªå®šä¹‰æŒ‡ä»¤çš„å¥½åŠæ³•ã€‚
>
> src/ng/directive ç›®å½•ã€‚

### åœ¨HTMLæ ‡ç­¾ä¸­ä½¿ç”¨æŒ‡ä»¤

> æŒ‡ä»¤å¯ä»¥ä»¥HTMLå…ƒç´ ã€å±æ€§ã€æ³¨é‡Šæˆ–CSSç±»ç­‰å‡ ç§å½¢å¼å‘ˆç°ã€‚
>
> ä»»ä½•æŒ‡ä»¤éƒ½èƒ½ä»¥å¤šç§æ ¼å¼è¯†åˆ«ã€‚
>
> åœ¨JSä¸­å®šä¹‰å’Œè°ƒç”¨æŒ‡ä»¤æ—¶ï¼ŒæŒ‡ä»¤åç§°æœ‰è§„èŒƒè¦æ±‚ï¼Œå¿…é¡»ä½¿ç”¨é©¼å³°å‘½åã€‚

## 8.2 æŒ‡ä»¤çš„ç¼–è¯‘ç”Ÿå‘½å‘¨æœŸ

ç¼–è¯‘

> å½“AngularJSç¼–è¯‘ä¸€ä¸ªHTMLæ¨¡ç‰ˆæ—¶ï¼Œå®ƒä¼šä¾¿åˆ©æµè§ˆå™¨æä¾›çš„DOMæ ‘ï¼Œå°è¯•å‚ç…§å·²æ³¨å†Œçš„æŒ‡ä»¤é›†æ¥åŒ¹é…æ¯ä¸ªå…ƒç´ ã€å±æ€§ã€æ³¨é‡Šä»¥åŠCSSç±»ã€‚æ¯å½“åŒ¹é…ä¸€ä¸ªæŒ‡ä»¤æ—¶ï¼ŒAngular JSå°±ä¼šè°ƒç”¨è¯¥æŒ‡ä»¤çš„ç¼–è¯‘å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªé“¾æ¥å‡½æ•°ã€‚Angular JSä¼šæ”¶é›†æ‰€æœ‰é“¾æ¥å‡½æ•°ã€‚
>
> ç¼–è¯‘å·¥ä½œæ—¶åœ¨ä½œç”¨åŸŸåˆ›å»ºä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘å‡½æ•°ä¸­æ²¡æœ‰ä»»ä½•å¯ç”¨çš„ä½œç”¨åŸŸæ•°æ®ã€‚

è¿æ¥

> ä¸€æ—¦æ‰€æœ‰çš„æŒ‡ä»¤éƒ½è¢«ç¼–è¯‘å®Œæˆï¼ŒAngular JSå°±ä¼šåˆ›å»ºä½œç”¨åŸŸï¼Œç„¶åé€šè¿‡è°ƒç”¨æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„é“¾æ¥å‡½æ•°å°†æŒ‡ä»¤å’Œä½œç”¨åŸŸè¿æ¥èµ·æ¥ã€‚
>
> åœ¨è¿æ¥é˜¶æ®µï¼Œä½œç”¨åŸŸå·²ç»è¢«é™„åŠ åˆ°æŒ‡ä»¤ä¸Šï¼Œæ‰€ä»¥é“¾æ¥å‡½æ•°å¯ä»¥å°†ä½œç”¨åŸŸå’ŒDOMç»‘å®šèµ·æ¥ã€‚

> ç¼–è¯‘é˜¶æ®µé€šå¸¸åšä¸€äº›ä¼˜åŒ–å·¥ä½œã€‚æœ‰å¯èƒ½æŒ‡ä»¤çš„å‡ ä¹æ‰€æœ‰å·¥ä½œéƒ½ä¼šåœ¨é“¾æ¥å‡½æ•°ä¸­å®Œæˆï¼ˆé™¤äº†ä¸€ä¸‹é«˜çº§ä»»åŠ¡ï¼Œå¦‚è®¿é—®åµŒå…¥å‡½æ•°ï¼‰ã€‚è€Œå¯¹äºé‡å¤æŒ‡ä»¤ï¼ŒæŒ‡ä»¤çš„ç¼–è¯‘å‡½æ•°åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä½†é“¾æ¥å‡½æ•°åœ¨æ¯æ¬¡è¿­ä»£æ—¶éƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ¯æ¬¡è¿­ä»£å¯¹åº”çš„æ•°æ®ä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚
>
> æ¨¡æ¿ä¸­æ¯ä¸ªæŒ‡ä»¤æ‰€å¯¹åº”çš„ç¼–è¯‘å‡½æ•°åªè¢«è°ƒç”¨ä¸€æ¬¡ã€‚

> å¦‚æœæŒ‡ä»¤ä¸­æœ‰ä¸€äº›ä¸ä¾èµ–ä½œç”¨åŸŸæ•°æ®çš„å¤æ‚åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™äº›åŠŸèƒ½åº”è¯¥æ”¾åœ¨ç¼–è¯‘å‡½æ•°ä¸­ï¼Œè¿™æ ·è¯¥åŠŸèƒ½å°±åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚

å¯¹äºé‡å¤æŒ‡ä»¤ï¼Œç¼–è¯‘å‡½æ•°æ¯ä¸ªæŒ‡ä»¤åªè°ƒç”¨ä¸€æ¬¡ã€‚

è€Œé“¾æ¥å‡½æ•°åœ¨æ¯ä¸€æ¬¡è¿­ä»£ä¸­éƒ½ä¼šè°ƒç”¨ã€‚

## 8.3 ä¸ºæŒ‡ä»¤ç¼–å†™å•å…ƒæµ‹è¯•

æµ‹è¯•æŒ‡ä»¤çš„åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š

- åŠ è½½åŒ…å«æŒ‡ä»¤çš„æ¨¡å—ã€‚
- ç¼–è¯‘ä¸€æ®µåŒ…å«æŒ‡ä»¤çš„æ ‡ç­¾å­—ç¬¦ä¸²ä»¥è·å–é“¾æ¥å‡½æ•°ã€‚
- æ‰§è¡Œé“¾æ¥å‡½æ•°å°†å…¶é“¾æ¥è‡³$rootScopeã€‚
- æ£€æŸ¥é¡µé¢å…ƒç´ æ˜¯å¦å…·å¤‡äº†ä½ æ‰€æœŸæœ›çš„å±æ€§ã€‚

## 8.4 å®šä¹‰æŒ‡ä»¤

> æ¯ä¸ªæŒ‡ä»¤éƒ½å¿…é¡»åœ¨æ¨¡å—ä¸Šæ³¨å†Œã€‚å®šä¹‰æŒ‡ä»¤çš„æ–¹æ³•æ˜¯åœ¨æ¨¡å—ä¸Šè°ƒç”¨directiveï¼ˆï¼‰æ–¹æ³•ï¼Œè°ƒç”¨æ–¹æ³•æ—¶éœ€è¦ä¼ é€’æŒ‡ä»¤çš„æ ‡å‡†åç§°å’Œä¸€ä¸ªè¿”å›æŒ‡ä»¤å®šä¹‰çš„å·¥å‚å‡½æ•°ã€‚
>
> å·¥å‚å‡½æ•°å¯ä»¥æ³¨å…¥æœåŠ¡ï¼Œä»¥ä¾¿æŒ‡ä»¤ä½¿ç”¨ã€‚
>
> æŒ‡ä»¤å®šä¹‰æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«çš„å­—æ®µå‘ŠçŸ¥ç¼–è¯‘å™¨è¯¥æŒ‡ä»¤è¦åšä»€ä¹ˆã€‚å…¶ä¸­æœ‰äº›å­—æ®µæ˜¯å£°æ˜å¼çš„ã€‚æœ‰äº›å­—æ®µæ˜¯å‘½ä»¤å¼çš„ã€‚

> æŒ‡ä»¤å®šä¹‰ä¸­å¯ä»¥ä½¿ç”¨çš„æ‰€æœ‰å­—æ®µï¼š
>
> - name:
> - restrict:
> - priorityï¼šæç¤ºç¼–è¯‘å™¨è¯¥æŒ‡ä»¤æ‰§è¡Œçš„é¡ºåºï¼ˆä¼˜å…ˆçº§ï¼‰
> - terminalï¼šç¼–è¯‘å™¨æ˜¯å¦åœ¨è¯¥æŒ‡ä»¤ä¹‹åç»§ç»­ç¼–è¯‘å…¶å®ƒæŒ‡ä»¤
> - linkï¼šå®šä¹‰å°†æŒ‡ä»¤ä¸ä½œç”¨åŸŸè¿æ¥èµ·æ¥çš„é“¾æ¥å‡½æ•°
> - templateï¼šç”¨äºç”ŸæˆæŒ‡ä»¤æ ‡ç­¾çš„å­—ç¬¦ä¸²
> - templateUrlï¼šæŒ‡å‘æŒ‡ä»¤æ¨¡ç‰ˆçš„URLåœ°å€
> - replaceï¼šæ˜¯å¦ä½¿ç”¨æ¨¡ç‰ˆå†…å®¹æ›¿æ¢æŒ‡ä»¤çš„ç°æœ‰å…ƒç´ 
> - transcludeï¼šæ˜¯å¦ä¸ºæŒ‡ä»¤æ¨¡ç‰ˆå’Œç¼–è¯‘å‡½æ•°æä¾›æŒ‡ä»¤å…ƒç´ ä¸­çš„å†…å®¹
> - scopeï¼šæ˜¯ä¸ºæŒ‡ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„å­ä½œç”¨åŸŸï¼Œè¿˜æ˜¯åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ
> - controllerï¼šä¸€ä¸ªä½œä¸ºæŒ‡ä»¤æ§åˆ¶å™¨çš„å‡½æ•°
> - requireï¼šè®¾ç½®è¦æ³¨å…¥å½“å‰æŒ‡ä»¤é“¾æ¥å‡½æ•°ä¸­çš„å…¶å®ƒæŒ‡ä»¤çš„æ§åˆ¶å™¨
> - compileï¼šå®šä¹‰ç¼–è¯‘å‡½æ•°ï¼Œç¼–è¯‘å‡½æ•°ä¼šæ“ä½œåŸå§‹DOMï¼Œè€Œä¸”ä¼šåœ¨æ²¡æœ‰æä¾›linkè®¾ç½®çš„æƒ…å†µä¸‹åˆ›å»ºé“¾æ¥å‡½æ•°ã€‚

## 8.5 ä½¿ç”¨æŒ‡ä»¤ä¿®æ”¹æŒ‰é’®æ ·å¼

### ç¼–å†™ä¸€ä¸ªæŒ‰é’®æŒ‡ä»¤

```javascript
(function (angular) {
    angular
        .module('com-button')
        .directive('button', config);

    function config() {
        return {
            restrict: 'E',
            compile: function (ele, attr) {
                ele.addClass('btn');
                if (attr.type === 'submit') {
                    ele.addClass('btn-primary');
                }
                if (attr.size) {
                    ele.addClass('btn-' + attr.size);
                }
            }
        }
    }
})(window.angular);
```

restrictï¼šâ€˜Eâ€™ é™åˆ¶æŒ‡ä»¤åªèƒ½ä»¥å…ƒç´ å½¢å¼å‡ºç°ã€‚

compileï¼šç¼–è¯‘å‡½æ•°ã€‚å‡½æ•°ä¼šåœ¨åŒ¹é…åˆ°æŒ‰é’®æŒ‡ä»¤çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ç¼–è¯‘å‡½æ•°ä¼ é€’äº†ä¸€ä¸ªåä¸ºelementçš„å‚æ•°ã€‚è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªjQueryå¯¹è±¡ï¼Œ**å¼•ç”¨äº†æŒ‡ä»¤æ‰€å¯¹åº”çš„DOMå…ƒç´ **ã€‚

åœ¨ç¼–è¯‘å‡½æ•°ä¸­ï¼Œç®€å•çš„æ ¹æ®å…ƒç´ çš„å±æ€§å€¼ç»™å…ƒç´ è¿½åŠ CSSç±»ã€‚å¯ä»¥ä½¿ç”¨æ³¨å…¥çš„å±æ€§å‚æ•°æ¥è·å–å…ƒç´ çš„å±æ€§å€¼ã€‚

åœ¨è¿™ä¸ªæŒ‡ä»¤ä¸­ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å‡½æ•°ä¸­æ‰§è¡Œå®Œæ‰€æœ‰çš„æ“ä½œï¼Œå®Œå…¨æ²¡æœ‰ä½¿ç”¨é“¾æ¥å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¯¹å…ƒç´ çš„ä¿®æ”¹å®Œå…¨æ²¡æœ‰ä¾èµ–ç»‘å®šåœ¨å…ƒç´ ä¸Šçš„ä½œç”¨åŸŸæ•°æ®ã€‚ä¹Ÿå¯ä»¥å°†è¿™äº›åŠŸèƒ½å…¨éƒ½æŒªåˆ°é“¾æ¥å‡½æ•°ä¸­ï¼Œè¿™æ ·ï¼Œå¦‚æœæŒ‰é’®å‡ºç°åœ¨ng-repeatå¾ªç¯ä¸­ï¼Œé‚£ä¹ˆæ¯æ¬¡è¿­ä»£éƒ½ä¼šè°ƒç”¨addClass()æ–¹æ³•ã€‚ 

## 8.6 ç†è§£Angular JSçš„ç»„ä»¶æŒ‡ä»¤

### ç¼–å†™ä¸€ä¸ªåˆ†é¡µæŒ‡ä»¤

### åœ¨æŒ‡ä»¤ä¸­ä½¿ç”¨HTMLæ¨¡ç‰ˆ

### ä»çˆ¶ä½œç”¨åŸŸä¸­éš”ç¦»æŒ‡ä»¤

> æŒ‡ä»¤ä¸­ä½¿ç”¨çš„ä½œç”¨åŸŸæœ‰ä¸‰ä¸ªè®¾ç½®é€‰é¡¹
>
> - å¤ç”¨ç»„ä»¶å…·ä½“ä½¿ç”¨ä½ç½®æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚è¿™æ˜¯é»˜è®¤è®¾ç½®ã€‚scopeï¼š falseã€‚
> - åˆ›å»ºä¸€ä¸ªå­ä½œç”¨åŸŸï¼Œè¯¥ä½œç”¨åŸŸåŸå‹ç»§æ‰¿è‡ªç»„ä»¶å…·ä½“ä½¿ç”¨ä½ç½®æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚scope: trueã€‚
> - åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œè¯¥ä½œç”¨åŸŸæ²¡æœ‰åŸå‹é›†æˆï¼Œæ‰€ä»¥ä¸å…¶çˆ¶ä½œç”¨åŸŸå®Œå…¨éš”ç¦»ã€‚è®¾ç½®çš„æ–¹æ³•æ˜¯ç»™scopeå±æ€§ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼š scope: {â€¦}ã€‚

**è™½ç„¶ç‹¬ç«‹ä½œç”¨åŸŸä¸å…¶çˆ¶ä½œç”¨åŸŸä¸å­˜åœ¨åŸå‹ç»§æ‰¿å…³ç³»ï¼Œä½†ä»ç„¶å¯ä»¥é€šè¿‡$parentå±æ€§æ¥è®¿é—®çˆ¶ä½œç”¨åŸŸã€‚ä½†è¿™æ ·ç ´åäº†æŒ‡ä»¤åŸŸå‘¨å›´ç¯å¢ƒçš„éš”ç¦»å…³ç³»ï¼Œä¸å»ºè®®ã€‚**

å°†æŒ‡ä»¤çš„ä½œç”¨åŸŸä¸çˆ¶ä½œç”¨åŸŸéš”ç¦»å¼€åï¼Œéœ€è¦æŒ‡å®šçˆ¶ä½œç”¨åŸŸä¸ç‹¬ç«‹ä½œç”¨åŸŸä¹‹å‰çš„æ•°æ®æ˜ å°„å…³ç³»ã€‚

> å®šä¹‰å…ƒç´ å±æ€§ä¸ç‹¬ç«‹ä½œç”¨åŸŸä¹‹é—´çš„å…³ç³»ï¼Œæœ‰3ä¸ªæ¥å£ï¼š@/=/&ã€‚

#### ä½¿ç”¨@æ’å…¥å±æ€§

> @ç¬¦å·è¡¨ç¤ºAngular JSä¼šå°†ç‰¹å®šå±æ€§çš„å€¼æ’å…¥ä½œç”¨åŸŸï¼Œå½“æ¨¡ç‰ˆå±æ€§å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¹Ÿä¼šåŒæ­¥æ›´æ–°ç‹¬ç«‹ä½œç”¨åŸŸä¸­çš„å¯¹åº”å±æ€§ã€‚æ’å…¥ä½¿ç”¨åŒèŠ±æ‹¬å·ï¼ˆ{{ }}ï¼‰åŒ…è£¹çˆ¶ä½œç”¨åŸŸä¸­çš„å±æ€§å€¼ï¼Œç”Ÿæˆä¸€ä¸ª**å­—ç¬¦ä¸²**æ¥æ’å…¥ã€‚
>
> **æ’å…¥æ°¸è¿œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚**

å±æ€§æ’å…¥ä¸æ‰‹åŠ¨$observeå±æ€§æ•ˆæœç­‰åŒã€‚

#### ä½¿ç”¨ï¼ç»‘å®šæ•°æ®

> ç­‰å·ï¼ˆ=ï¼‰è¡¨ç¤ºAngular JSä¼šä¿æŒç‰¹å®šå±æ€§è¡¨è¾¾å¼ä¸ç‹¬ç«‹ä½œç”¨åŸŸå±æ€§å€¼åŒå‘åŒæ­¥ã€‚è¿™æ˜¯ä¸€ç§åŒå‘æ•°æ®ç»‘å®šï¼Œå…è®¸å¯¹è±¡å’Œå€¼åœ¨ç»„ä»¶å†…å¤–ç›´æ¥æ˜ å°„ã€‚
>
> DOMå±æ€§ä¸­çš„è¡¨è¾¾å¼åº”è¯¥æ˜¯å¯ä»¥èµ‹å€¼çš„ï¼Œè€Œä¸æ˜¯éšæ„è®¡ç®—å‡ºæ¥çš„è¡¨è¾¾å¼ã€‚

ä½¿ç”¨ç­‰å·çš„åŒå‘æ•°æ®ç»‘å®šæœ‰ç‚¹ç±»ä¼¼äºæ‰‹åŠ¨è®¾ç½®ä¸¤ç§$watchæ–¹æ³•ã€‚

#### ä½¿ç”¨&æä¾›ä¸€ä¸ªå›è°ƒè¡¨è¾¾å¼

> &ç¬¦å·è¡¨ç¤ºå±æ€§ä¸­è®¾ç½®çš„è¡¨è¾¾å¼ä¼šè¢«å½“æˆä½œç”¨åŸŸä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå½“å±æ€§è¢«è°ƒç”¨æ—¶ï¼Œè¯¥è¡¨è¾¾å¼å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚è¿™ä¸ªæ¥å£å¯ä»¥ç”¨æ¥åˆ›å»ºç»„ä»¶çš„å›è°ƒå‡½æ•°ã€‚

è¿™ç§ç»‘å®šæ–¹å¼ç­‰åŒäº$parseå±æ€§ä¸­è¡¨è¾¾å¼ï¼Œè€Œä¸”åœ¨ç‹¬ç«‹ä½œç”¨åŸŸä¸­æš´éœ²äº†è¡¨è¾¾å¼å‡½æ•°ã€‚

### å®ç°åˆ†é¡µç»„ä»¶

```html
<div class="pagination">
    <ul class="page-wrap">
        <li class="page-item">
            <a ng-click="selectPrevious()" ng-class="{'selected': noPrevious()}">Previous</a>
        </li>
        <li ng-repeat="page in pages">
            <a ng-click="selectPage(page)" ng-class="{'selected': isActive(page)}" class="page-item">{{page}}</a>
        </li>
        <li class="page-item">
            <a ng-click="selectNext()" ng-class="{'selected': noNext()}">Next</a>
        </li>
    </ul>
</div>

```

```javascript
function config() {
        return {
            restrict: 'E',
            templateUrl: '../src/components/pagination/page.tpl.html',
            scope: {
                pageNum: '=',
                currentPage: '=',
                onSelectPage: '&' // è°ƒç”¨controlleré‡Œçš„å‡½æ•°
            },
            replace: true,
            link: function (scope) {
                scope.$watch('pageNum', function (value) {
                    scope.pages = [];
                    for (var i = 0; i <= value; i++) {
                        scope.pages.push(i + 1);
                        if (scope.currentPage > value) {
                            scope.selectPage(value);
                        }
                    }
                });

                scope.isActive = function (page) {
                    return scope.currentPage === page;
                };

                scope.selectPage = function (p) {
                    if (!scope.isActive(p)) {
                        scope.currentPage = p;
                        scope.onSelectPage({page: p});
                        console.log(scope.currentPage + 'from link');
                    } else {
                        console.log('å·²ç»åœ¨è¿™ä¸€é¡µäº†');
                    }
                };

                scope.noNext = function () {
                    return scope.currentPage === scope.pageNum + 1;
                };

                scope.selectNext = function () {
                  if (! scope.noNext()) {
                      scope.selectPage(scope.currentPage + 1);
                  }
                };

                scope.noPrevious = function () {
                    return scope.currentPage === 1;
                };
                scope.selectPrevious = function () {
                    if (!scope.noPrevious()) {
                        scope.selectPage(scope.currentPage - 1);
                    }
                }
            }
        }
    }
```

```html
<pagination page-num="10" current-page="vm.currentPage" on-select-page="vm.selectPage(page)"></pagination>

<pagination page-num="10" current-page="vm.currentPage"></pagination>
```

## 8.7 åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰éªŒè¯æŒ‡ä»¤

ä½¿ç”¨æ—¶htmlï¼š

```html
<form name="passwordForm">
            <input type="password" name="password" ng-model="user.password">
            <input type="password" name="confirmPassword" ng-model="confirmPassword" validate-equals="user.password">
        </form>
```

> è¿™ä¸ªè‡ªå®šä¹‰çš„æ¨¡å‹éªŒè¯å™¨æŒ‡ä»¤å¿…é¡»ä¸ngModelControlleré›†æˆï¼Œä»¥ä¾¿ä¸ºç”¨æˆ·æä¾›ä¸€è‡´çš„éªŒè¯ä½“éªŒã€‚
>
> å¯ä»¥é€šè¿‡ç»™formå’Œinputè®¾ç½®name æ¥å°†ngModelControlleræš´éœ²ç»™ä½œç”¨åŸŸã€‚è¿™æ ·ï¼Œå°±å¯ä»¥è®¿é—®æ§åˆ¶å™¨ä¸­çš„æ¨¡å‹éªŒè¯æ–¹æ³•äº†ã€‚è‡ªå®šä¹‰çš„éªŒè¯æŒ‡ä»¤ä¼šæ£€æŸ¥confirmPasswordå’Œuser.passwordæ¨¡å‹å€¼ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™ä¼šå°†confirmPasswordå…ƒç´ è®¾ç½®ä¸ºéªŒè¯é€šè¿‡ã€‚

 ### éœ€è¦å…¶å®ƒæŒ‡ä»¤çš„æ§åˆ¶å™¨

> éªŒè¯æŒ‡ä»¤éœ€è¦è®¿é—®ngModelControllerï¼Œ ngModelControlleræ˜¯ng-modelæŒ‡ä»¤çš„æ§åˆ¶å™¨ã€‚**å¯ä»¥åœ¨æŒ‡ä»¤å®šä¹‰çš„requireå­—æ®µä¸­æŒ‡å®šéœ€è¦çš„æ§åˆ¶å™¨**ã€‚è¿™ä¸ªå­—æ®µæ¥å—å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ã€‚æ¯ä¸ªå­—ç¬¦ä¸²å¿…é¡»æ˜¯æ‰€éœ€æ§åˆ¶å™¨å¯¹åº”çš„**æŒ‡ä»¤åç§°**ã€‚
>
> å½“æ‰€éœ€çš„æŒ‡ä»¤è¢«æ‰¾åˆ°åï¼Œè¯¥æŒ‡ä»¤çš„æ§åˆ¶å™¨ä¼šè¢«æ³¨å…¥è‡ªå®šä¹‰æŒ‡ä»¤çš„é“¾æ¥å‡½æ•°ä¸­ï¼Œä½œä¸ºç¬¬4ä¸ªå‚æ•°ï¼Œå¦‚æœéœ€è¦å¤šä¸ªæ§åˆ¶å™¨ï¼Œé‚£ä¹ˆç¬¬4ä¸ªå‚æ•°å°†ä¼šæ˜¯ä¸€ä¸ªç”±æ‰€æœ‰æ§åˆ¶å™¨æŒ‰é¡ºåºï¼ˆrequireå­—æ®µä¸­çš„æ’åˆ—é¡ºåºï¼‰ç»„æˆçš„æ•°ç»„ã€‚
>
> ä¸€ä¸ªğŸŒ°ï¼š
>
> ```javascript
> require: 'ngModel',
> link: function(scope, ele, attr, ngModelController) {}
> ```

psï¼š å¦‚æœå½“å‰å…ƒç´ ä¸åŒ…å«requireå­—æ®µè®¾å®šçš„æŒ‡ä»¤ï¼Œé‚£ä¹ˆç¼–è¯‘å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

#### å¯é€‰çš„ä¾èµ–æ§åˆ¶å™¨

> requireå­—æ®µä¸­çš„æ§åˆ¶å™¨å¯ä»¥è®¾ç½®ä¸ºå¯é€‰ï¼Œæ–¹å¼æ˜¯åœ¨æŒ‡ä»¤åç§°å‰åŠ ä¸€ä¸ªâ€˜ ï¼Ÿâ€™ï¼Œè¿™æ ·ï¼Œå¦‚æœå¯¹åº”çš„æŒ‡ä»¤å°šä¸å­˜åœ¨ï¼Œé‚£ä¹ˆç¬¬4ä¸ªå‚æ•°å°†ä¼šæ˜¯nullï¼Œåˆ™ä¸ä¼šæŠ¥é”™ã€‚å¦‚æœè‡ªå®šä¹‰æŒ‡ä»¤ä¾èµ–å¤šä¸ªå¤–éƒ¨æ§åˆ¶å™¨ï¼Œé‚£ä¹ˆæ³¨å…¥çš„æ§åˆ¶å™¨æ•°ç»„ä¸­å¯¹åº”çš„å€¼å°†ä¼šæ˜¯nullã€‚

#### æŸ¥æ‰¾ç¥–å…ˆå…ƒç´ çš„æ§åˆ¶å™¨

> å¦‚æœå…è®¸æ‰€éœ€è¦çš„æŒ‡ä»¤æ§åˆ¶å™¨å­˜åœ¨äºå½“å‰å…ƒç´ ä¸Šï¼Œæˆ–è€…ä¹Ÿå¯ä»¥å­˜åœ¨äºå½“å‰å…ƒç´ çš„ä»»æ„ç¥–å…ˆå…ƒç´ ä¸Šï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æŒ‡ä»¤åç§°å‰åŠ ä¸€ä¸ª â€™ ^ â€˜ï¼Œè¿™æ ·ï¼Œç¼–å†™å™¨å°±ä¼šä»åŒ…å«å½“å‰æŒ‡ä»¤çš„å…ƒç´ å¼€å§‹å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ§åˆ¶å™¨ã€‚
>
> ä¸¾ä¸€ä¸ªğŸŒ°ï¼š
>
> ````javascript
> require: '^ngModel'
> ````

> å¯ä»¥ç»„åˆä½¿ç”¨å¯é€‰å‰ç¼€  â€˜ ? â€™å’Œç¥–å…ˆå‰ç¼€  â€˜ ^ â€™ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªæŒ‡ä»¤å°±å¯ä»¥æ˜¯å¯é€‰çš„ä¹Ÿå­˜åœ¨äºç¥–å…ˆå…ƒç´ ä¸­ã€‚
>
> ä¸¾ä¸€ä¸ªğŸŒ°ï¼š
>
> ```javascript
> require: '^?form'
> ```
>
> è¿™æ ·å°±å¯ä»¥æŸ¥æ‰¾åˆ°formæŒ‡ä»¤çš„æ§åˆ¶å™¨ï¼Œå³ä½¿ng-modelæŒ‡ä»¤æ²¡æœ‰å°†è‡ªå·±æ³¨å†Œåˆ°formå…ƒç´ ä¸Šï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚

### ä½¿ç”¨ngModelController

> ä¸€æ—¦æ‹¿åˆ°ngModelControllerï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒçš„APIç»™inputå…ƒç´ è®¾å®šéªŒè¯æ–¹æ³•ã€‚è¿™æ˜¯è¿™ç±»æŒ‡ä»¤çš„é€šç”¨åšæ³•ã€‚
>
> ngModelControlleræš´éœ²çš„å‡½æ•°å’Œå±æ€§ï¼š
>
> -  $parsersï¼šinputçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ä¼šè¢«ä¾æ¬¡è°ƒç”¨çš„å‡½æ•°ç®¡çº¿
> - $formattersï¼šæ¨¡å‹å‘ç”Ÿå˜åŒ–æ—¶ä¼šè¢«ä¸€æ¬¡è°ƒç”¨çš„å‡½æ•°ç®¡çº¿
> - $setValidity(validationErrorKey, isValid)ï¼šç”¨äºè®¾ç½®æ¨¡å‹éªŒè¯ç»“æœçš„å‡½æ•°ï¼Œå‚æ•°ä¸­è®¾å®šäº†éªŒè¯é”™è¯¯æ—¶çš„æ ‡è¯†
> - $validï¼šå¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™å€¼ä¸ºtrue
> - $errorï¼šåŒ…å«éªŒè¯é”™è¯¯ä¿¡æ¯çš„å¯¹è±¡

ç®¡çº¿ï¼šæŠŠè‹¥å¹²ä¸ªå‘½ä»¤ä¸²èµ·æ¥ï¼Œå‰é¢å‘½ä»¤çš„è¾“å‡ºæˆä¸ºåé¢å‘½ä»¤çš„è¾“å…¥ï¼Œå¦‚æ­¤å®Œæˆä¸€ä¸ªæµå¼è®¡ç®—ã€‚

### å®ç°è‡ªå®šä¹‰éªŒè¯æŒ‡ä»¤

$evalæ˜¯ä¸€ä¸ªä½œç”¨åŸŸscopeä¸­çš„æ–¹æ³•ï¼Œå®ƒå°†ä¼šåœ¨å½“å‰ä½œç”¨åŸŸä¸­æ‰§è¡Œä¸€ä¸ªè¡¨è¾¾å¼å¹¶è¿”å›ç»“æœã€‚

```javascript
 angular.module('comPassword')
        .directive('validateEquals', config);

    function config() {
        return {
            require: 'ngModel',
            link: function (scope, ele, attr, ngModelCtrl) {
                console.log(ngModelCtrl);
                // æ¯”è¾ƒä¼ å…¥çš„å€¼ä¸å±æ€§è¡¨è¾¾å¼æŒ‡å®šçš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œ
                // å°†è¯¥å‡½æ•°å‹å…¥$parsersï¼Œ$formattersç®¡çº¿ï¼Œè¿™æ ·æ¯æ¬¡æ¨¡å‹å€¼æˆ–è¾“å…¥å€¼å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šè°ƒç”¨è¯¥éªŒè¯å‡½æ•°ã€‚
                function validateEqual(myValue) {
                    var valid = (myValue === scope.$eval(attr.validateEquals));
                    ngModelCtrl.$setValidity('equals', valid);
                    return valid ? myValue : undefined;
                }

                ngModelCtrl.$parsers.push(validateEqual);
                ngModelCtrl.$formatters.push(validateEqual);

                // ç‰¹åˆ«æ³¨æ„ï¼Œç”¨äºå¯¹æ¯”å‚è€ƒæ¨¡å‹å‘ç”Ÿå˜åŒ–çš„æƒ…å†µã€‚
                // å½“è¯¥æ¨¡å‹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡æ•…æ„è°ƒç”¨$setViewValue() æ¥æ‰‹å·¥è§¦å‘$parsersç®¡çº¿
                scope.$watch(attr.validateEquals, function () {
                    ngModelCtrl.$setViewValue(ngModelCtrl.$viewValue);
                });
            }
        }
    }
```

```html
<!--è‡ªå®šä¹‰éªŒè¯è¡¨å•-->
<form name="passwordForm">
  <input type="password" name="password" ng-model="user.password">
  <input type="password" name="confirmPassword" ng-model="vm.confirmPassword" validate-equals="user.password">
  <i ng-show="passwordForm.confirmPassword.$error.equals">not equals</i>
</form>
```

$setValidityä¼šå½±å“åˆ°$invalidå’Œ$validçš„å€¼ï¼Œåˆ©ç”¨è¿™ä¸ªå¯ä»¥æ§åˆ¶éªŒè¯ç»“æœä¿¡æ¯çš„æ˜¾ç¤ºã€‚

## 8.8 åˆ›å»ºä¸€ä¸ªå¼‚æ­¥æ¨¡å‹éªŒè¯å™¨



> æœ‰äº›éªŒè¯å™¨åªæœ‰ä¸è¿œç¨‹æœåŠ¡äº¤äº’æ‰èƒ½å®ŒæˆéªŒè¯ã€‚è€Œè¿œç¨‹æœåŠ¡è¿”å›çš„å“åº”ä¼šæ˜¯å¼‚æ­¥çš„ã€‚

ä¸¾ä¸€ä¸ªğŸŒ°

æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„e-mailåœ°å€æ˜¯å¦è¢«å·²è¢«å ç”¨ï¼Œåˆ›å»ºä¸€ä¸ªuniqueEmailï¼Œæ£€æŸ¥åœ°å€æ˜¯å¦è¢«å ç”¨ã€‚

### æ¨¡æ‹Ÿç”¨æˆ·æœåŠ¡

## 8.9 åŒ…è£…jQueryUIdatepickeræŒ‡ä»¤





