# 第七章 安全

## 7.1 提供服务端认证和授权

### 处理未授权的访问

> 在应用中，当客户端尝试以下操作时，服务器会返回401未认证错误：
>
> - 未认证用户发器的任何non-GET请求（例如POST、PUT或者 DELETE）。
> - 非管理员用户对用户或者项目数据库集合发起的non-GET请求。

### 提供服务端验证API

> 客户端可以通过服务端的HTTP API来验证用户。

## 7.2 保护局部模版

## 7.3 阻止恶意攻击

> 服务端与浏览器之间必须有一种相互信任的机制来允许合法用户的正常访问。

### 防止cookie监听、中间人攻击

> 当通过HTTP在客户端和服务端之间传递数据时，第三方有可能会坚听到敏感信息，甚至获取cookie进而伪装成你与服务器进行通信。这种方式通常称为“中间人攻击”。防止这种攻击最简单的方式就时使用HTTPS，而不是HTTP协议。
>
> 使用HTTPS加密链接，可以防止敏感数据在传输过程中被获取，防止未授权用户获取已验证的cookie来劫持我们的会话。

### 防止跨站脚本攻击

> 跨站脚本攻击（XSS）指攻击者注入客户端脚本到某些用户能访问到的页面。如果注入脚本是向服务端发起请求，服务端会认为这是由已认证用户发起的合法请求。

#### 确保AngularJS表达式内的HTML内容的安全性、

#### 允许不安全的HTML绑定

#### 净化HTML

### 防止JSON注入攻击

### 防止跨站请求伪造

## 7.4 客户端安全

 ### 创建security服务

> security服务是一个组件，可为应用提供一些API管理用户登录退出，以及获取当前用户的信息。可以将这个服务注入控制器和指令。

### 显示登录表单

### 创建安全的菜单及工具栏

## 7.5 支持客户端认证

### 处理认证失败

### 拦截响应

### 创建securityInterceptor服务

> 可以创建一个securityInterceptor服务，与服务端响应的promise对象配合工作。在拦截器中将检查响应promise对象是否包含被拒绝的401未知认证错误。如果是，则创建一个新的promise重试之前的请求，以代替最初的promise返回给调用者。

### 创建securityRetryQueue服务









